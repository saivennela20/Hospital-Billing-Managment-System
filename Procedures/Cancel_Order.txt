CREATE OR REPLACE PROCEDURE CANCEL_ORDER ( P_ORDERID IN orders.order_id%TYPE  )
AS
VCUSTID VARCHAR(20);
VORDERID NUMBER;
VFNAME VARCHAR(20);
BEGIN
SELECT C.CUST_ID , C.CUST_FIRST_NAME INTO VCUSTID, VFNAME FROM ORDERS O, CUSTOMER C 
WHERE O.ORDER_ID = P_ORDERID
AND C.CUST_ID = O.CUST_ID
-----DBMS_OUTPUT.PUT_LINE(VCUSTID || ' ' || VFNAME );
AND UPPER(C.CUST_FIRST_NAME) = (SELECT USER FROM DUAL);
UPDATE ORDERS
SET ORDER_STATUS = 'CANCELLED'
WHERE ORDER_ID = P_ORDERID;

UPDATE LINE_ITEMS
SET ORDER_STATUS = 'CANCELLED'
WHERE ORDER_ID = P_ORDERID;
COMMIT;
DBMS_OUTPUT.PUT_LINE('ORDER ID ' || VORDERID || 'FOR CUSTOMER ' ||VCUSTID ||' ' ||'IS CANCELLED' );
END;
/

SELECT * FROM ORDERS;
SELECT * FROM LINE_ITEMS;
EXECUTE cancel_order( 18 );